data = `..#............................#....................................................................................#..........#........#...
..........#.........................................#.......................................................................................
...................#..........................................................................#.............................................
.....................................................................................#.............................................#........
.......#.......#.............#..........#......#...................#.....#..................................................................
................................................................................#..................#..............#.........................
....................................#.......................................................................................................
...........#...................................................................................#......................................#.....
.......................................................................................................................#.........#..........
.....................#.................................................#...................#.................#..............#...............
....#...........................................#...............#...........................................................................
.........................#.......................................................................#..........................................
...................................#......................#.......................................................#.......................#.
..................#...........................................................#.......................#.................#...........#.......
..........#........................................................#..........................................#.............................
.............................................#.........#.....#..............................................................................
.......................#.....................................................................#..............................#..........#....
.............................#.......................................................#...........................#..........................
..#...........#.......................#.....................................#...............................................................
...........................................................#.............................................#..................................
......#..........................................................#......#........................................................#..........
................................#.........#...........#....................................#........#...................#..................#
...........................#..................................................#..............................#..............................
..............................................#.................................................#...........................................
.#.................................................................................................................#........................
.......................................................................#....................................................................
...............#.............................................................................................................#..........#...
.................................#.............................#............................................#...............................
.....#.................#...................#................................................................................................
....................................................#...................................................#............#......................
...........#.....#...................................................................#............................................#.........
..............................................#...........................................................................#.................
...#.........................#.....................................................................#........................................
.........................................................#...................................#........................................#.....
.........#....................................................#........#................#.....................#.............................
........................#..........................................................................................#........................
..............#...................................#............................#.............................................#.....#........
.................................#................................................................#.........................................
..................#........................#...............#................................#.............#.............................#...
..........#........................................................#............................................................#...........
..#.....................................................................................#.............................#.....................
..........................#..........#..................................#......................................#...........#................
................................................................#...........................................................................
................#................................#..........................#...............................................................
...........................................#..................................................#.....#.......#...............................
..........#............................................#.....................................................................#..............
.......................#....................................#...........................................................#..............#....
.....#.........................#........#..............................................#.................#........................#.........
.................#....................................................#............................................#........................
....................................#...............#................................................#......................................
.........................#........................................#................#.......#...................#............................
....................................................................................................................................#.......
...........#...................................#...........................#......................#.........................#..............#
..................................#......#..................................................................................................
......#....................#.........................#..................................................#...................................
......................#...................................#......#.....#.................................................#..................
..............#..............................................................................#.................#.....................#......
............................................................................................................................................
#.............................#................#....................................................................#....................#..
............................................................................................................................................
........#...........................................#.......................................................................................
...................................................................#..........#..................#..........................................
.....................#............#........#.............................................#............#................#....................
................#............................................................................................................#..............
...............................................................................................................#...................#........
........................#......#..........................#.....#......#................................................................#...
................................................#..........................................#.............#..................................
......................................#..............................................................................#......................
..#.................................................................#.........#.............................................................
..........#.....#...............................................................................................#...........#...............
.................................#....................................................................#..............................#......
.....................................................#........................................#........................#....................
..........................................#..................#............#.................................................................
......................#...............................................................#..................#.........#............#...........
......#........................................................................#............................................................
...................................#...................................#..................................................#.................
...................................................#.........................................#.................#............................
...........................#...................................#.....................................................................#......
........................................#...................................................................................................
................#......................................#........................#.........#.....#...........................................
...........#......................#.....................................................................#...................................
....#....................#...................#...................#................................................#...........#...........#.
............................................................................................................................................
............................................................................................................................................
.....................................#....................................#.................................................................
.......................#..................#........#............................#................#.............#............................
...............#...............................................#......................#..............................................#......
............................................................................................................................................
.................................#...........#.....................#....................................................#...................
............................................................................................................................................
..#........#..........#...............#..................................................................#..........#......................#
............................................................#............................#..................................................
.................................................................#..........#.................................#.................#...........
.............................#......................#.......................................................................................
....#..................................................................................................................................#....
...................#...............#..................................................#....................#................................
.........................................................#......................................#...................#..............#........
.....................................................................#...................................................#..................
........................#...................................................................#..................#............................
...#.....#...............................#....................#.............................................................................
................#...............#...........................................................................................................
.....................#........................................................#.....................................................#.......
..............................................#.......#................#...............................................#...................#
.........................................................................................#...............#...................#..............
.#...........................#.......#......................................................................................................
.............................................................................................................#........................#.....
.................................#..........................................................................................................
...........#........................................................................................#.............................#.........
................#...............................................#............................#...................#..........................
...#............................................................................#...........................................................
....................................................#.......#.......#......#...........................................................#....
.........................#..................................................................................................................
....................#...............#.........................................................................................#.............
.........................................................#....................#......................#......................................
....#........................#...............#........................#...............#.....................................................
..........#......#....................................................................................................................#.....
..............................................................................................#...................#.........................
.......................................................#...................................................#.................#..............
..........................#....................#............................................................................................
........................................#......................#.........#...............#.......#......................#.........#.....#...
...............................#....................................#.......................................................................
........#...........#.............................#.........................................................................................
...#...........#...................................................................#..................#............#........................
...........................#..............................#...................................#.............................................
...................................#.............................#..........................................#...............................
..............................................#........................#........#..........................................#................
.......................................................................................#.............................#..............#.......
.........................................#..................................................................................................
.....#............#......................................#.....#............................#...............................................
............................#...............................................................................................................
.......................#.........#........................................#..............................#...............................#..
..#...........#.......................................#.........................#...........................................................
.......................................#.........................#..........................................................................
............................................................#...............................................................................
.......#......................#........................................#................................................#..............#....
..............................................................................................................#.............................
...............................................#.....................................................#......................................
......................#..................................................................#......#.................................#.......#.
..#.......#................#......#..................................#.......#.....................................#........................
................#...............................................#..................#....................#..................#................`;

/*
data = `...#......
.......#..
#.........
..........
......#...
.#........
.........#
..........
.......#..
#...#.....`;
*/

list = data.split`\n`.map(x => x.indexOf('#') == -1 ? [x, x] : x).flat();

indexes = list[0].split``.map((_, i) => list.map(l => l[i]).join``.indexOf('#') == -1 ? i : null).filter(x => x !== null);

exp = list.map(l => {
  j = 0; acc = '';
  for (i = 0; i < indexes.length; i++) {
    ix = indexes[i];
  // console.log(l, j, i, l.substring(j, ix + 1));
    acc += l.substring(j, ix + 1) + '.';
    j = ix + 1;
  }
  acc += l.slice(j);
  return acc;
});

locs = [];
exp.map((x, i) => x.split``.map((y, j) => y == '#' ? locs.push([i, j]) : null))

dist = (([x1, y1], [x2, y2]) => Math.abs(x2 - x1) + Math.abs(y2 - y1));
locs.map((l1) => locs.map(l2 => dist(l1, l2))).reduce((a, b) => a + b.reduce((c, d) => c + d, 0), 0) / 2

tot = 0;
for (i = 0; i < locs.length; i++) {
  for (j = i + 1; j < locs.length; j++) {
    let x = locs[i], y = locs[j]
    // console.log(i + 1, j + 1, x, y, dist(x, y));
    
    tot += dist(locs[i], locs[j]);
  }
}

locs

console.log(tot);
